(this.webpackJsonpstangers_things_react=this.webpackJsonpstangers_things_react||[]).push([[0],{65:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var s=n(18),r=n(9),c=n(0),a=n(10),o=n.n(a),i=(n(65),n(12)),l=n(15),u=n(13),j=n.n(u),d=n(19),h=n(25),m=n(110),g=n(2),p=function(e){var t=e.logInRequest,n=(e.isLoggedin,e.setIsLoggedin),s=Object(c.useState)({username:"",password:""}),a=Object(r.a)(s,2),o=a[0],u=a[1];function p(e){var t=e.target.attributes.name.value,n=Object(h.a)({},o);n[t]=e.target.value,u(n),console.log(o)}var b=Object(i.f)();function O(){return(O=Object(d.a)(j.a.mark((function e(s){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.next=3,t(o);case 3:localStorage.getItem("token")?(n(!0),localStorage.setItem("username",o.username),b.push("/")):b.push("/message");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(g.jsxs)("div",{id:"loginPage",children:[Object(g.jsx)("h1",{children:"Log In"}),Object(g.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(g.jsx)("div",{className:"loginInputs",children:Object(g.jsx)(m.a,{id:"outlined-basic-1",onChange:p,label:"Username",name:"username",variant:"outlined",type:"text",style:{width:350,marginBottom:20,marginTop:10}})}),Object(g.jsx)("div",{className:"loginInputs",children:Object(g.jsx)(m.a,{id:"outlined-basic=2",onChange:p,label:"Password",name:"password",variant:"outlined",type:"password",style:{width:350,marginBottom:20}})}),Object(g.jsx)("button",{className:"loginButton",children:"Log In"})]}),Object(g.jsx)(l.b,{to:"/signup",children:"Don't have an account? Sign Up"})]})},b=n(109),O=n(5),f=function(e){var t=e.isLoggedin,n=e.setIsLoggedin,s=Object(O.a)({root:{background:"#990033",borderRadius:3,border:0,color:"white",height:65,padding:"0 30px",boxShadow:"black",fontSize:"1rem"},label:{textTransform:"capitalize"}})(b.a),r=Object(i.f)();return Object(g.jsxs)("header",{children:[Object(g.jsx)("h1",{children:"Stranger Things"}),Object(g.jsxs)("div",{id:"nav-bar",children:[Object(g.jsx)(s,{component:l.b,to:"/",children:"Home"}),Object(g.jsx)(s,{component:l.b,to:"/posts",children:"Posts"}),t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(s,{component:l.b,to:"/profile",children:"Profile"}),Object(g.jsx)(s,{onClick:function(){n(!1),localStorage.removeItem("message"),localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("success"),r.push("/login"),console.log(localStorage)},children:"Log Out"})]}):Object(g.jsx)(s,{component:l.b,to:"/login",children:"Log in"})]})]})},x=function(e){var t=e.isLoggedin;e.setIsLoggedin;return Object(g.jsxs)("div",{id:"homePage",children:[Object(g.jsx)("h1",{className:"homepageH1",children:"Welcome to Stranger Things!"}),t?Object(g.jsx)("div",{children:Object(g.jsxs)("h3",{children:["Logged in as ",localStorage.getItem("username")]})}):Object(g.jsx)("div",{children:Object(g.jsx)("h3",{children:"Please login or register which can be done at the top!"})})]})},v=function(e){var t=e.createNewUser,n=e.setIsLoggedin;console.log(t);var s=Object(c.useState)({username:"",password:""}),a=Object(r.a)(s,2),o=a[0],l=a[1];function u(e){var t=e.target.attributes.name.value,n=Object(h.a)({},o);n[t]=e.target.value,l(n),console.log(o)}console.log(o);var p=Object(i.f)();function b(){return(b=Object(d.a)(j.a.mark((function e(s){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.next=3,t(o);case 3:r=localStorage.getItem("token"),console.log(r),r?(n(!0),localStorage.setItem("username",o.username),p.push("/")):p.push("/message");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(g.jsxs)("div",{id:"loginPage",children:[Object(g.jsx)("h1",{children:"Sign In"}),Object(g.jsxs)("form",{onSubmit:function(e){return b.apply(this,arguments)},children:[Object(g.jsx)("div",{className:"loginInputs",children:Object(g.jsx)(m.a,{id:"outlined-basic-1",onChange:u,label:"Username",name:"username",value:o.username,variant:"outlined",type:"text",style:{width:350,marginBottom:20,marginTop:10}})}),Object(g.jsx)("div",{className:"loginInputs",children:Object(g.jsx)(m.a,{id:"outlined-basic=2",onChange:u,label:"Password",name:"password",value:o.password,variant:"outlined",type:"password",style:{width:350,marginBottom:20}})}),Object(g.jsx)("button",{className:"loginButton",children:"Sign Up"})]})]})},y=n(42),S="https://strangers-things.herokuapp.com/api/2105-OKU-RM-WEB-PT/",w=localStorage.getItem("token");function P(e){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(w),localStorage.setItem("username",t.username),e.next=5,fetch("".concat(S,"/users/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:"".concat(t.username),password:"".concat(t.password)}})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.data&&localStorage.setItem("token",e.data.token),localStorage.setItem("message",e.error.message),console.log(e)}));case 5:e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function I(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"/users/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:"".concat(t.username),password:"".concat(t.password)}})});case 3:return n=e.sent,e.next=6,n.json();case 6:(s=e.sent).data&&localStorage.setItem("token",s.data.token),localStorage.setItem("message",s.error.message),console.log(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function k(e){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),e.next=4,fetch("".concat(S,"/posts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({post:{title:"".concat(t.title),description:"".concat(t.description),price:"".concat(t.price),location:"".concat(t.location),willDeliver:"".concat(t.willDeliver)}})}).then((function(e){return e.json()})).then((function(e){console.log(e)}));case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function N(e){fetch("".concat(S,"posts/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.error(e)}))}function F(e){fetch("".concat(S,"posts"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}}).then((function(e){return e.json()})).then((function(t){e(t.data.posts)})).catch((function(e){console.error(e)}))}function D(e){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(j.a.mark((function e(t){var n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(S,"users/me"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)}});case 3:return n=e.sent,console.log(n),e.next=7,n.json();case 7:s=e.sent,console.log(s),t(s.data.messages),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var B=function(e){var t=e.featuredPost,n=e.setFeaturedPost,s=e.isLoggedin,a=Object(c.useState)({content:""}),o=Object(r.a)(a,2),i=o[0],l=o[1],u=t._id,j=t.isAuthor;return Object(g.jsx)("div",{className:"featured-post",children:Object(g.jsxs)("div",{className:"post",children:[Object(g.jsx)(y.a,{style:{marginLeft:"99%",color:"red",fontSize:"1.5rem"},onClick:function(){return n(!1)}}),Object(g.jsx)("h1",{style:{marginTop:"0"},children:t.title}),Object(g.jsx)("p",{children:t.description}),Object(g.jsxs)("h4",{children:[Object(g.jsx)("b",{children:"Price: "}),t.price]}),Object(g.jsxs)("h3",{children:[Object(g.jsx)("b",{children:"Seller: "}),t.author.username]}),Object(g.jsxs)("h4",{children:[Object(g.jsx)("b",{children:"Location: "}),t.location]}),Object(g.jsxs)("h4",{children:[Object(g.jsx)("b",{children:"Willing to deliver: "}),t.willDeliver?"Yes":"No"]}),s?j?Object(g.jsx)("div",{className:"post-messages",children:Object(g.jsx)("h3",{children:"MESSAGES"})}):Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("h3",{children:"Message User about this Post"}),Object(g.jsx)(m.a,{id:"messenger",name:"content",label:"Message",style:{width:"31.25rem"},multiline:!0,onChange:function(e){return function(e,t){var n=Object(h.a)({},i);n[t]=e.target.value,l(n)}(e,"content")}}),Object(g.jsx)(b.a,{variant:"outlined",color:"primary",onClick:function(e){var t,n;e.preventDefault(),t=u,n=i,fetch("".concat(S,"posts/").concat(t,"/messages"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(w)},body:JSON.stringify({message:{content:"".concat(n.content)}})}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch(console.error),document.getElementById("messenger").value=""},style:{marginTop:"1rem",width:"18.75rem"},children:"Send Message"})]}):null,t.messages?Object(g.jsx)(g.Fragment,{children:t.messages.map((function(e,t){return Object(g.jsxs)("div",{className:"message",children:[Object(g.jsx)("p",{children:e.content}),Object(g.jsxs)("h5",{children:["From User: ",e.fromUser.username]})]},t)}))}):""]})})},M=function(e){var t=e.getMessages,n=(e.userPosts,e.setUserPosts,e.featuredPost),s=e.setFeaturedPost,a=e.isLoggedin,o=Object(c.useState)([]),i=Object(r.a)(o,2),u=i[0],j=i[1];Object(c.useEffect)((function(){t(j)}),[]),console.log(u);var d=[],h=[];return u.map((function(e){e.fromUser.username==="".concat(localStorage.getItem("username"))?d.push(e):h.push(e)})),console.log(d),console.log(h),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("h1",{className:"profileH1",children:["Welcome ",localStorage.getItem("username")]}),Object(g.jsx)("hr",{}),Object(g.jsxs)("div",{id:"profile",children:[Object(g.jsxs)("div",{className:"profileMessageSection",children:[Object(g.jsx)("h3",{className:"messagesH3",children:"Messages To Me "}),Object(g.jsx)("div",{className:"profileCards",children:h.map((function(e,t){return Object(g.jsxs)("div",{className:"message",children:[Object(g.jsxs)("h2",{children:["From: ",e.fromUser.username]}),Object(g.jsx)("p",{children:e.content}),Object(g.jsx)(l.b,{onClick:function(t){return linkToPost(t,e.post._id)},children:Object(g.jsxs)("h4",{children:["VIEW MY POST: ",e.post.title]})})]},t)}))})]}),Object(g.jsxs)("div",{className:"profileMessageSection",children:[Object(g.jsx)("h3",{className:"messagesH3",children:"Messages from Me"}),Object(g.jsx)("div",{className:"profileCards",children:d.map((function(e,t){return Object(g.jsxs)("div",{className:"message",children:[Object(g.jsxs)("h2",{children:["From: ",e.fromUser.username]}),Object(g.jsx)("p",{children:e.content}),Object(g.jsx)(l.b,{children:Object(g.jsxs)("h4",{children:["VIEW MY POST: ",e.post.title]})})]},t)}))})]}),n?Object(g.jsx)(B,{featuredPost:n,setFeaturedPost:s,isLoggedin:a}):Object(g.jsx)(g.Fragment,{})]})]})},E=function(e){var t=e.isLoggedin,n=e.userPosts,s=e.setUserPosts,a=e.featuredPost,o=e.setFeaturedPost,i=Object(c.useState)(!1),l=Object(r.a)(i,2),u=l[0],h=l[1],m=Object(c.useState)(""),p=Object(r.a)(m,2),O=p[0],f=p[1],x=0===O.length?n:n.filter((function(e){return e.description.toLowerCase().includes(O.toLowerCase())||e.title.toLowerCase().includes(O.toLowerCase())||e.author.username.toLowerCase().includes(O.toLowerCase())||e.location.toLowerCase().includes(O.toLowerCase())||e.price.includes(O)}));function v(e,t){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,N(n);case 3:F(s);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){F(s)}),[a,u,v]),Object(g.jsxs)("div",{id:"posts-page",children:[Object(g.jsxs)("div",{className:"posts-header",children:[Object(g.jsx)("h1",{children:"Posts"}),Object(g.jsx)(J,{userPosts:n,setUserPosts:s,search:O,setSearch:f}),t&&Object(g.jsx)(b.a,{variant:"outlined",color:"primary",style:{height:"3rem",marginTop:".8rem"},onClick:function(e){e.preventDefault(),h(!0)},children:"Create a Post"})]}),u&&Object(g.jsx)(W,{setCreatePost:h}),Object(g.jsx)("hr",{}),Object(g.jsx)("div",{className:"post-list",children:x.map((function(e,t){return Object(g.jsx)(_,{post:e,title:e.title,description:e.description,price:e.price,username:e.author.username,locaion:e.location,setFeaturedPost:o,isAuthor:e.isAuthor,postId:e._id,deletePost:v},t)}))}),a?Object(g.jsx)(B,{featuredPost:a,setFeaturedPost:o,isLoggedin:t}):Object(g.jsx)(g.Fragment,{})]})},A=n(112),z=n(111),W=function(e){var t=e.setCreatePost,n=Object(c.useState)({title:"",description:"",price:"",location:"",willDeliver:!1}),s=Object(r.a)(n,2),a=s[0],o=s[1];function i(e,t){var n=Object(h.a)({},a);n[t]="willDeliver"===t?!!e.target.checked:e.target.value,o(n)}function l(){return(l=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,k(a);case 3:t(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(g.jsx)("div",{className:"create-post",children:Object(g.jsxs)("form",{children:[Object(g.jsx)(y.a,{style:{color:"red",fontSize:"1.5rem",marginLeft:"37rem"},onClick:function(){return t(!1)}}),Object(g.jsxs)("div",{children:[Object(g.jsx)(m.a,{style:{marginTop:"1rem",marginLeft:"3rem",width:"33rem"},name:"title",onChange:function(e){return i(e,"title")},variant:"outlined",label:"Title",color:"primary",required:!0}),Object(g.jsx)(m.a,{style:{marginTop:"2rem",marginLeft:"3rem",width:"33rem"},name:"description",onChange:function(e){return i(e,"description")},variant:"outlined",label:"Description",color:"primary",multiline:!0,required:!0}),Object(g.jsx)(m.a,{style:{marginTop:"2rem",marginLeft:"3rem",width:"33rem"},name:"price",onChange:function(e){return i(e,"price")},variant:"outlined",label:"Price $",color:"primary",required:!0}),Object(g.jsx)(m.a,{style:{marginTop:"2rem",marginLeft:"3rem",width:"33rem"},name:"location",onChange:function(e){return i(e,"location")},variant:"outlined",label:"Location",color:"primary"}),Object(g.jsx)("div",{children:Object(g.jsx)(A.a,{control:Object(g.jsx)(z.a,{color:"primary",name:"willDeliver",onChange:function(e){return i(e,"willDeliver")}}),label:"Willing to Deliver?",style:{marginLeft:"2rem",marginTop:"1rem"}})}),Object(g.jsx)(b.a,{style:{marginTop:"1rem",marginLeft:"3rem",width:"33rem"},onClick:function(e){return l.apply(this,arguments)},variant:"outlined",color:"primary",children:"Create Post"})]})]})})},_=function(e){var t=e.post,n=e.title,s=e.description,r=e.price,c=e.username,a=e.location,o=e.setFeaturedPost,i=e.isAuthor,u=e.postId,j=e.deletePost;return Object(g.jsxs)("div",{className:"user-post",children:[Object(g.jsx)("h2",{children:n}),Object(g.jsx)("p",{children:s}),Object(g.jsxs)("h4",{children:[Object(g.jsx)("b",{children:"Price: "}),r]}),Object(g.jsxs)("h3",{children:[Object(g.jsx)("b",{children:"Seller: "}),c]}),Object(g.jsxs)("h4",{children:[Object(g.jsx)("b",{children:"Location: "}),a]}),Object(g.jsx)(b.a,{variant:"outlined",color:"primary",component:l.b,to:"/featuredpost/".concat(u),style:{marginBottom:"1rem"},onClick:function(e){e.preventDefault(),o(t)},children:"Expand post"}),"            ",i?Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(b.a,{variant:"outlined",color:"secondary",style:{marginBottom:"1rem",marginLeft:"1rem"},onClick:function(e){j(e,u)},children:"Delete Post"})}):""]})},J=function(e){var t=e.search,n=e.setSearch;return Object(g.jsx)(m.a,{variant:"filled",label:"Search",type:"text",value:t,onChange:function(e){return n(e.target.value)},style:{marginTop:".6rem",marginLeft:"2rem",marginRight:"2rem",width:"20rem"}})};var q=function(){return Object(g.jsxs)("div",{id:"message",children:[Object(g.jsx)("h3",{className:"errorType",children:localStorage.getItem("message")}),Object(g.jsx)(l.b,{to:"/login",onClick:void localStorage.removeItem("message"),children:"Please try again"})]})},H=function(){var e,t=Object(c.useState)([]),n=Object(r.a)(t,2),a=n[0],o=n[1],l=Object(c.useState)(null),u=Object(r.a)(l,2),j=u[0],d=u[1],h=Object(c.useState)(null),m=Object(r.a)(h,2),b=m[0],O=m[1];return Object(c.useEffect)((function(){localStorage.getItem("token")?d(!0):d(!1)}),[]),Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"app",children:[Object(g.jsx)(f,{isLoggedin:j,setIsLoggedin:d}),Object(g.jsxs)(i.c,{children:[Object(g.jsx)(i.a,{path:"/login",children:Object(g.jsx)(p,{logInRequest:P,isLoggedin:j,setIsLoggedin:d})}),Object(g.jsx)(i.a,{path:"/signup",children:Object(g.jsx)(v,{createNewUser:I,setIsLoggedin:d})}),Object(g.jsx)(i.a,{path:"/profile",children:Object(g.jsx)(M,{getMessages:D,userPosts:a,setUserPosts:o,featuredPost:b,setFeaturedPost:O,isLoggedin:j})}),Object(g.jsx)(i.a,{exact:!0,path:"/",children:Object(g.jsx)(x,{isLoggedin:j,setIsLoggedin:d})}),Object(g.jsx)(i.a,{path:"/posts",children:Object(g.jsx)(E,(e={isLoggedin:j,userPosts:a,setUserPosts:o},Object(s.a)(e,"userPosts",a),Object(s.a)(e,"featuredPost",b),Object(s.a)(e,"setFeaturedPost",O),e))}),Object(g.jsx)(i.a,{path:"/message",children:Object(g.jsx)(q,{})})]})]})})};o.a.render(Object(g.jsx)(l.a,{children:Object(g.jsx)(H,{})}),document.getElementById("app"))}},[[77,1,2]]]);
//# sourceMappingURL=main.4ce5e388.chunk.js.map